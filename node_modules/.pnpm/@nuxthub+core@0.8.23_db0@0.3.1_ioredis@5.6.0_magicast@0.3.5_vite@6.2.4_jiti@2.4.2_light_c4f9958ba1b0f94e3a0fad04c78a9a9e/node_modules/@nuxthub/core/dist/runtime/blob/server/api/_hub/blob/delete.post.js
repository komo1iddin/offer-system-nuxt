import { eventHandler, readValidatedBody, sendNoContent } from "h3";
import { z } from "zod";
import { hubBlob } from "../../../utils/blob.js";
import { requireNuxtHubAuthorization } from "../../../../../utils/auth.js";
import { requireNuxtHubFeature } from "../../../../../utils/features.js";
export default eventHandler(async (event) => {
  await requireNuxtHubAuthorization(event);
  requireNuxtHubFeature("blob");
  const { pathnames } = await readValidatedBody(event, z.object({
    pathnames: z.array(z.string().min(1)).min(1)
  }).parse);
  await hubBlob().delete(pathnames.map((pathname) => decodeURIComponent(pathname)));
  return sendNoContent(event);
});
