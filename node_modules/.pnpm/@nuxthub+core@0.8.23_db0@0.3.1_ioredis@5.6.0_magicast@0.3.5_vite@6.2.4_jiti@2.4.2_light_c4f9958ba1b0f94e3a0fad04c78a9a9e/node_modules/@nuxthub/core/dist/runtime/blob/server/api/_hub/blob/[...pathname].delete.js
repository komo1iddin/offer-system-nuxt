import { eventHandler, getValidatedRouterParams, sendNoContent } from "h3";
import { z } from "zod";
import { hubBlob } from "../../../utils/blob.js";
import { requireNuxtHubAuthorization } from "../../../../../utils/auth.js";
import { requireNuxtHubFeature } from "../../../../../utils/features.js";
export default eventHandler(async (event) => {
  await requireNuxtHubAuthorization(event);
  requireNuxtHubFeature("blob");
  const { pathname } = await getValidatedRouterParams(event, z.object({
    pathname: z.string().min(1)
  }).parse);
  await hubBlob().delete(decodeURIComponent(pathname));
  return sendNoContent(event);
});
