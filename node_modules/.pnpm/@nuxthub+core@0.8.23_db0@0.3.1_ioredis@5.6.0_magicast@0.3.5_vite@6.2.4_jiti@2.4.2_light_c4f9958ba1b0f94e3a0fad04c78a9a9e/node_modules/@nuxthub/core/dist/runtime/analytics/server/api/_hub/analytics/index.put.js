import { eventHandler, readValidatedBody } from "h3";
import { z } from "zod";
import { hubAnalytics } from "../../../utils/analytics.js";
import { requireNuxtHubAuthorization } from "../../../../../utils/auth.js";
import { requireNuxtHubFeature } from "../../../../../utils/features.js";
export default eventHandler(async (event) => {
  await requireNuxtHubAuthorization(event);
  requireNuxtHubFeature("analytics");
  const { data } = await readValidatedBody(event, z.object({
    data: z.custom()
  }).parse);
  await hubAnalytics().put(data);
  return true;
});
